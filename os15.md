---
# **РОССИЙСКИЙ УНИВЕРСИТЕТ ДРУЖБЫ НАРОДОВ**
### **Факультет физико-математических и естественных наук**
### **Кафедра прикладной информатики и теории вероятностей**

---

# **ОТЧЕТ**
# **ПО ЛАБОРАТОРНОЙ РАБОТЕ  № 15**
### *дисциплина: операционные системы*


### Студент: Пиняева Анна Андреевна
### Группа: НФИбд-02-20

### **МОСКВА**
### 2021 
---

# Цель работы

## Приобретение практических навыков работы с именованными каналами.


# Ход работы

### 1. Ознакомилась с пограммами и на их основе написала свои, добавила 1 клиент.


*Рисунок 1 (server.c):*

![файл server.c](https://sun9-33.userapi.com/impg/wqrGaBsAFyl0t9QIGWR9ej35kiCQkyQxDKuAiA/68g875sP8jM.jpg?size=2044x1492&quality=96&sign=cb309363cfc49571d25c0eef5a243a2c&type=album) 

---
*Рисунок 2 (server.c):*

![файл server.c](https://sun9-42.userapi.com/impg/FEKvCziLgi3mwSaovem8tXBQftXfQgsAbsYr5w/6sIbq_n7dos.jpg?size=2044x1492&quality=96&sign=ffbab23c2561b1dfd5a4c9336b32e408&type=album) 
---
*Рисунок 3 (client.c):*

  ![файл client.c](https://sun9-73.userapi.com/impg/XaFyKPdRF3w3DfHGH_rzh9eLGhHoLULxc2Sk4Q/5z-UkFsP3kQ.jpg?size=2044x1492&quality=96&sign=3707bc6f1765fc6248139653d1aab89b&type=album) 
---
*Рисунок 4 (client2.c):*

  ![файл client2.c](https://sun9-61.userapi.com/impg/KQ5I1yXhEk7a_IZMb4bh03ftf--QVEKj5_7Mlw/uoLsEd7HkRQ.jpg?size=2044x1492&quality=96&sign=1a942019a886f23f6014dd2046ffc4a7&type=album) 
  ---
  *Рисунок 5 (common.h):*

  ![common.h](https://sun9-33.userapi.com/impg/awyrH5J0c0WuJsVgqgnYCgotDNf1s_ua1VA4sQ/sZGRk57n0wQ.jpg?size=2044x1492&quality=96&sign=a5ffd8539b6b9dd7a06f4e3780412fd8&type=album) 
  ---
  *Рисунок 6 (client2.c):*

  ![client2.c](https://sun9-56.userapi.com/impg/4yx7Mv1womdboodYodBStrqpnvq8RYq2Ef7SsQ/jDoR96XXOmA.jpg?size=2044x1492&quality=96&sign=02255fbfbf20cc23c89e92aaa5c2f7dc&type=album) 


## 2. Получили следующий результат:

*Рисунок 7:*

![результат](https://sun9-32.userapi.com/impg/kusKbOBOysuCr4Sini0Yo7COSLPOksWmUWTkvw/Xif48R6Jtbs.jpg?size=1242x424&quality=96&sign=ad79fea8703e44a112e53bac82d8db75&type=album) 

*Рисунок 8:*

![результат](https://sun9-51.userapi.com/impg/_LerOGwB3GdyM5upAH7dFIITbk5TP7_9Y0gJWA/t3XZWXLT9Xs.jpg?size=1125x902&quality=96&sign=e7b3e359daf6bae73f355e00ebd236e3&type=album) 

## В случае, если сервер завершит работу, не закрыв канал, файл FIFO не удалится, поэтому его в следующий раз создать будет нельзя и вылезет ошибка, следовательно, работать ничего не будет.

 ### Вывод: приобретены практические навыки работы с именованными каналами.

# Контрольные вопросы.

## 1. Именованные каналы отличаются от неименованных наличием идентификатора канала, который представлен как специальный файл (соответственно имя именованного канала — это имя файла). Поскольку файл находится на локальной файловой системе, данное IPC используется внутри одной системы.

## 2. Создание неименованного канала из командной строки невозможно.

## 3. Создание именованного канала из командной строки возможно.

## 4. int read(int pipe_fd, void *area, int cnt); int write(int pipe_fd, void *area, int cnt); Первый аргумент этих вызовов - дескриптор канала, второй - указатель на область памяти, с которой происходит обмен, третий - количество байт. Оба вызова возвращают число переданных байт (или -1 - при ошибке).

## 5. int mkfifo (const char *pathname, mode_t mode) ; mkfifo(FIFO_NAME, 0600) ; Первый параметр — имя файла, идентифицирующего канал, второй параметр маска прав доступа к файлу. Вызов функции mkfifo() создаёт файл канала (с именем, заданным макросом FIFO_NAME).

## 6. При чтении меньшего числа байтов, чем находится в канале, возвращается требуемое число байтов, остаток сохраняется для последующих чтений. При чтении большего числа байтов, чем находится в канале или FIFO возвращается доступное число байтов.

## 7. При записи большего числа байтов, чем это позволяет канал или FIFO, вызов write(2) блокируется до освобождения требуемого места. При этом атомарность операции не гарантируется. Если процесс пытается записать данные в канал, не открытый ни одним процессом на чтение, процессу генерируется сигнал. Запись числа байтов, меньшего емкости канала или FIFO, гарантированно атомарно. Это означает, что в случае, когда несколько процессов одновременно записывают в канал, порции данных от этих процессов не перемешиваются.

## 8. В общем случае возможна много направленная работа процессов с каналом, т.е. возможна ситуация, когда с одним и тем же каналом взаимодействуют два и более процесса, и каждый из взаимодействующих каналов пишет и читает информацию в канал. Но традиционной схемой организации работы с каналом является однонаправленная организация, когда канал связывает два, в большинстве случаев, или несколько взаимодействующих процесса, каждый из которых может либо читать, либо писать в канал.

## 9. Write - Функция записывает length байтов из буфера buffer в файл, определенный дескриптором файла fd. Эта операция чисто 'двоичная' и без буферизации. Реализуется как непосредственный вызов DOS. С помощью функции write мы посылаем сообщение клиенту или серверу.

## 10. Строковая функция strerror - функция языков C/C++, транслирующая код ошибки, который обычно хранится в глобальной переменной errno, в сообщение об ошибке, понятном человеку. Ошибки эти возникают при вызове функций стандартных Си-библиотек. Возвращенный указатель ссылается на статическую строку с ошибкой, которая не должна быть изменена программой. Дальнейшие вызовы функции strerror перезапишут содержание этой строки. Интерпретированные сообщения об ошибках могут различаться, это зависит от платформы и компилятора.
